# 💰 Household Ledger AI: 지능형 가계부 에이전트 로드맵

본 문서는 오픈 데이터(은행/결제 내역)를 활용하여 정형 데이터와 지식 그래프를 통합 분석하는 '지능형 가계부 AI'의 개발 로드맵입니다.

## [Phase 1: 데이터 처리 및 듀얼 DB 적재]
### 1단계: 오픈 데이터 전처리 파이프라인 구축
* **내용**: CSV/JSON 형태의 오픈 뱅킹 및 결제 내역 데이터를 시스템 표준 포맷으로 변환.
* **구현**: 비정형 가맹점명을 표준 카테고리로 매핑하는 정제 로직.

### 2단계: PostgreSQL & Neo4j 듀얼 적재 (Ingestion)
* **내용**: 정형 내역은 PostgreSQL에, 소비 관계(가맹점-카테고리-결제수단)는 Neo4j에 적재.
* **구현**: `ledger-ingest` CLI를 통한 관계형 지식 그래프 자동 생성 엔진.

---

## [Phase 2: 멀티 에이전트 분석 엔진 구축]
### 3단계: 의도 분석 기반 지능형 라우팅 (Routing)
* **내용**: "지난달 식비 총액" -> SQL 에이전트, "자주 가는 가맹점들의 카테고리 관계" -> Neo4j 에이전트로 분기.
* **구현**: `router_node`를 통한 질의 의도 최적화.

### 4단계: LangGraph 기반 자가 치유(Self-Healing) 워크플로우
* **내용**: SQL/Cypher(Neo4j) 쿼리 생성 실패 시 에러 메시지를 바탕으로 스스로 수정하는 루프 구축.
* **구현**: 생성-검증-실행-피드백 순환 구조.

---

## [Phase 3: 문맥 유지 및 지능형 분석]
### 5단계: Redis 기반 꼬리 물기 질문(Context) 처리
* **내용**: "거기서 쓴 돈은?"과 같은 대명사 처리를 위해 이전 대화의 검색 조건(기간, 대상) 유지.
* **구현**: `chat_history`를 활용한 동적 프롬프트 주입.

### 6단계: 관계형 지식 추출 및 인사이트 생성
* **내용**: Neo4j를 활용해 "A 가맹점과 유사한 소비 패턴을 가진 카테고리" 등 단순 조회를 넘는 관계 분석 제공.